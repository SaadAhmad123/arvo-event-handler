<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Arvo Domains | arvo-event-handler</title><meta name="description" content="Documentation for arvo-event-handler"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script><link rel="stylesheet" href="../assets/typedoc-github-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">arvo-event-handler</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="theme_search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="theme_search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="theme_search_placeholder" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>theme_preparing_search_index</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="theme_menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="" aria-current="page">Arvo Domains</a></li></ul></div><div class="tsd-panel tsd-typography"><h1 id="arvo-domains-technical-documentation" class="tsd-anchor-link">Arvo Domains - Technical Documentation<a href="#arvo-domains-technical-documentation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Domains are labels that indicate which execution context an event should route to. An execution context can represent a different event broker, topic, or functional part of the application that executes events fundamentally differently. For example, a human-in-the-loop event cannot be processed in the same execution plane because it requires delivery to a human for response outside the current context. If an event is labeled with a domain such as <code>'human.interaction'</code>, the event handling infrastructure routes it to the appropriate execution context. Domain is simply a label; how you leverage it depends on your architecture. Within any execution context, events have <code>domain: null</code> because they are already where they need to be. A non-null domain value indicates the event should route to a different broker, topic, or system.</p>
<h2 id="domain-inheritance-in-orchestrations" class="tsd-anchor-link">Domain Inheritance in Orchestrations<a href="#domain-inheritance-in-orchestrations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Orchestration chains automatically maintain domain context through the subject. When a parent orchestration spawns a child orchestration, the child inherits the parent's domain through <code>parentSubject$$</code>. The completion event automatically routes back through the parent's domain to maintain workflow coherence.</p>
<pre><code class="typescript">// Parent orchestration emits child spawn
xstate.emit({
  type: 'child.orchestrator.init',
  data: {
    parentSubject$$: context.subject,  // Inherits domain
    value: 100
  }
});

// Child completes, routes back to parent's domain automatically
</code><button type="button">Copy</button></pre>

<p>For service calls from orchestrations, you control the domain explicitly. If not specified, events default to <code>domain: null</code> and remain local.</p>
<pre><code class="typescript">// Stays in current domain
xstate.emit({
  type: 'service.validate',
  data: { input: '...' }
});

// Routes to external domain
xstate.emit({
  type: 'external.service.call',
  data: { value: 100 },
  domain: ['external-system']
});
</code><button type="button">Copy</button></pre>

<h2 id="domain-behavior-in-handlers" class="tsd-anchor-link">Domain Behavior in Handlers<a href="#domain-behavior-in-handlers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Handlers are stateless and have no parent context. By default, handler responses preserve the triggering event's domain to maintain execution context.</p>
<pre><code class="typescript">// Routes back through triggering event's domain
return {
  type: 'evt.service.success',
  data: { result: '123' }
};

// Route to specific domain
return {
  type: 'evt.service.success',
  data: { result: '123' },
  domain: ['logging-domain']
};

// Domain-agnostic
return {
  type: 'evt.service.success',
  data: { result: '123' },
  domain: [ArvoDomain.AGNOSTIC]
};
</code><button type="button">Copy</button></pre>

<h1 id="designing-domain-boundaries" class="tsd-anchor-link">Designing Domain Boundaries<a href="#designing-domain-boundaries" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Cross-domain communication should be infrequent. If two components constantly exchange events across domains, they belong together. High cross-domain traffic indicates your separation boundary is incorrectly placed. The domain field forces you to be explicit about where separation exists in your system.</p>
<blockquote>
<p><strong>Warning</strong> Domains, while being a powerful concept, can introduce significant design nuance and tracking complexity. Arvo recommends that when execution context boundaries exist and domained events need to move across them, an exchange layer should be implemented to facilitate that exchange. Within those domains, all events should default to domain: null and only emit domained events when they are required to escape outside the execution context.</p>
</blockquote>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>theme_settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">theme_member_visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>flag_protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>flag_inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>flag_external</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">theme_theme</label><select id="tsd-theme"><option value="os">theme_os</option><option value="light">theme_light</option><option value="dark">theme_dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>theme_on_this_page</h3></summary><div class="tsd-accordion-details"><a href="#arvo-domains-technical-documentation"><span>Arvo <wbr/>Domains -<wbr/> <wbr/>Technical <wbr/>Documentation</span></a><ul><li><a href="#domain-inheritance-in-orchestrations"><span>Domain <wbr/>Inheritance in <wbr/>Orchestrations</span></a></li><li><a href="#domain-behavior-in-handlers"><span>Domain <wbr/>Behavior in <wbr/>Handlers</span></a></li></ul><a href="#designing-domain-boundaries"><span>Designing <wbr/>Domain <wbr/>Boundaries</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">arvo-event-handler</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>theme_loading</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with <a href="https://github.com/JulianWowra/typedoc-github-theme" target="_blank">typedoc-github-theme</a></p></footer><div class="overlay"></div></body></html>
