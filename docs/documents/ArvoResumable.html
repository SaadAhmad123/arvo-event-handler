<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ArvoResumable | arvo-event-handler</title><meta name="description" content="Documentation for arvo-event-handler"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><link rel="stylesheet" href="../assets/typedoc-github-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">arvo-event-handler</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">arvo-event-handler</a></li><li><a href="ArvoResumable.html">ArvoResumable</a></li></ul></div><div class="tsd-panel tsd-typography"><blockquote>
<p>Really bad temporary documentation by GenAI (Claude). Will update manually later. Sorry...</p>
</blockquote>
<a id="md:arvoresumable" class="tsd-anchor"></a><h1 class="tsd-anchor-link">ArvoResumable<a href="#md:arvoresumable" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>A stateful orchestration handler for managing distributed workflows in the Arvo event-driven system. ArvoResumable provides a handler-based approach to workflow orchestration that prioritizes explicit control and simplicity over declarative abstractions.</p>
<a id="md:overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#md:overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ArvoResumable addresses fundamental challenges in event-driven architecture by providing a straightforward imperative programming model for workflow orchestration. Unlike state machine approaches, it uses handler functions that give developers direct control over workflow logic, making debugging easier and reducing the learning curve for teams familiar with traditional programming patterns.</p>
<a id="md:key-capabilities" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Capabilities<a href="#md:key-capabilities" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Handler-based workflow orchestration</strong> with explicit state control</li>
<li><strong>Contract-driven event validation</strong> with runtime schema enforcement</li>
<li><strong>Distributed resource locking</strong> for transaction safety</li>
<li><strong>Comprehensive OpenTelemetry integration</strong> for observability</li>
<li><strong>Automatic error handling</strong> with system error event generation</li>
<li><strong>Support for orchestrator chaining</strong> and nested workflow patterns</li>
<li><strong>Multi-domain event routing</strong> and organization</li>
<li><strong>Graduated complexity</strong> allowing simple workflows to remain simple</li>
</ul>
<a id="md:getting-started" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Getting Started<a href="#md:getting-started" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:basic-setup" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Basic Setup<a href="#md:basic-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createArvoResumable</span><span class="hl-1">, </span><span class="hl-5">SimpleMachineMemory</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;arvo-xstate&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">createArvoOrchestratorContract</span><span class="hl-1">, </span><span class="hl-5">createArvoContract</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;arvo-core&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">z</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;zod&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">// Define your orchestrator contract</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">userProcessingContract</span><span class="hl-1"> = </span><span class="hl-0">createArvoOrchestratorContract</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">uri:</span><span class="hl-1"> </span><span class="hl-2">&#39;#/orchestrators/userprocessing&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.user.processing&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">versions:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-5">:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">init:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">object</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">(),</span><br/><span class="hl-1">        </span><span class="hl-5">action:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">enum</span><span class="hl-1">([</span><span class="hl-2">&#39;create&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;update&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;delete&#39;</span><span class="hl-1">])</span><br/><span class="hl-1">      }),</span><br/><span class="hl-1">      </span><span class="hl-5">complete:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">object</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-5">success:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">boolean</span><span class="hl-1">(),</span><br/><span class="hl-1">        </span><span class="hl-5">message:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">()</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Define service contracts</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">validationService</span><span class="hl-1"> = </span><span class="hl-0">createArvoContract</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">uri:</span><span class="hl-1"> </span><span class="hl-2">&#39;#/services/validation&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.validation.check&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">versions:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-5">:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">accepts:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">object</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">(),</span><br/><span class="hl-1">        </span><span class="hl-5">data:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">any</span><span class="hl-1">()</span><br/><span class="hl-1">      }),</span><br/><span class="hl-1">      </span><span class="hl-5">emits:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">&#39;evt.validation.success&#39;</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">object</span><span class="hl-1">({</span><br/><span class="hl-1">          </span><span class="hl-5">valid:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">boolean</span><span class="hl-1">(),</span><br/><span class="hl-1">          </span><span class="hl-5">issues:</span><span class="hl-1"> </span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">array</span><span class="hl-1">(</span><span class="hl-5">z</span><span class="hl-1">.</span><span class="hl-0">string</span><span class="hl-1">()).</span><span class="hl-0">optional</span><span class="hl-1">()</span><br/><span class="hl-1">        })</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Create the orchestrator</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">orchestrator</span><span class="hl-1"> = </span><span class="hl-0">createArvoResumable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">contracts:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">self:</span><span class="hl-1"> </span><span class="hl-5">userProcessingContract</span><span class="hl-1">.</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    </span><span class="hl-5">services:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">validation:</span><span class="hl-1"> </span><span class="hl-5">validationService</span><span class="hl-1">.</span><span class="hl-0">version</span><span class="hl-1">(</span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-5">memory:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">SimpleMachineMemory</span><span class="hl-1">(),</span><br/><span class="hl-1">  </span><span class="hl-5">executionunits:</span><span class="hl-1"> </span><span class="hl-8">1</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">handler:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">context</span><span class="hl-1">, </span><span class="hl-5">input</span><span class="hl-1">, </span><span class="hl-5">service</span><span class="hl-1">, </span><span class="hl-5">contracts</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">// Handle initialization</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">input</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">context:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">userId</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">action:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">action</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">step:</span><span class="hl-1"> </span><span class="hl-2">&#39;validating&#39;</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-5">services:</span><span class="hl-1"> [{</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.validation.check&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">data:</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">userId</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-5">data:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          }]</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-3">// Handle service responses</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">service</span><span class="hl-1">?.</span><span class="hl-5">type</span><span class="hl-1"> === </span><span class="hl-2">&#39;evt.validation.success&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">service</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">valid</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">context:</span><span class="hl-1"> { ...</span><span class="hl-5">context</span><span class="hl-1">, </span><span class="hl-5">step:</span><span class="hl-1"> </span><span class="hl-2">&#39;completed&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">            </span><span class="hl-5">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-5">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-5">message:</span><span class="hl-1"> </span><span class="hl-2">&#39;User processing completed successfully&#39;</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          };</span><br/><span class="hl-1">        } </span><span class="hl-4">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-5">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-5">message:</span><span class="hl-1"> </span><span class="hl-2">`Validation failed: </span><span class="hl-6">${</span><span class="hl-5">service</span><span class="hl-10">.</span><span class="hl-5">data</span><span class="hl-10">.</span><span class="hl-5">issues</span><span class="hl-10">?.</span><span class="hl-0">join</span><span class="hl-10">(</span><span class="hl-2">&#39;, &#39;</span><span class="hl-10">)</span><span class="hl-6">}</span><span class="hl-2">`</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          };</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">// Execute workflow</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">orchestrator</span><span class="hl-1">.</span><span class="hl-0">execute</span><span class="hl-1">(</span><span class="hl-5">initializationEvent</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="md:multi-domain-event-broadcasting" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Multi-Domain Event Broadcasting<a href="#md:multi-domain-event-broadcasting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ArvoResumable supports sophisticated multi-domain event distribution, enabling advanced workflow patterns including human-in-the-loop operations, external system integrations, and custom processing pipelines.</p>
<a id="md:understanding-domains" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Understanding Domains<a href="#md:understanding-domains" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Domains represent different processing contexts or routing namespaces for events. They enable sophisticated event distribution patterns where a single handler response can create multiple events for different processing pipelines.</p>
<a id="md:domain-assignment-rules" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Domain Assignment Rules<a href="#md:domain-assignment-rules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When returning events from a handler, you can specify domains using the <code>domain</code> field:</p>
<ol>
<li><strong>Array Processing</strong>: Each element in the <code>domain</code> array creates a separate ArvoEvent instance</li>
<li><strong><code>undefined</code> in Array Resolution</strong>: <code>undefined</code> elements resolve to: <code>event.contract.domain ?? triggeringEvent.domain ?? handler.contract.domain ?? null</code></li>
<li><strong><code>null</code> in Array Resolution</strong>: <code>null</code> elements resolve to events which <code>domain: null</code></li>
<li><strong>Automatic Deduplication</strong>: Duplicate domains are automatically removed to prevent redundant events</li>
<li><strong>Default Behavior</strong>: Omitting the <code>domain</code> field (or setting to <code>undefined</code>) defaults to <code>[null]</code> (single event, no domain)</li>
</ol>
<a id="md:domain-broadcasting-patterns" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Domain Broadcasting Patterns<a href="#md:domain-broadcasting-patterns" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">context</span><span class="hl-1">, </span><span class="hl-5">input</span><span class="hl-1">, </span><span class="hl-5">service</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">input</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">context:</span><span class="hl-1"> { </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">userId</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-5">services:</span><span class="hl-1"> [</span><br/><span class="hl-1">          </span><span class="hl-3">// Standard internal processing</span><br/><span class="hl-1">          {</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.validation.check&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">data:</span><span class="hl-1"> { </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">userId</span><span class="hl-1"> }</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><br/><span class="hl-1">          </span><span class="hl-3">// External system integration  </span><br/><span class="hl-1">          {</span><br/><span class="hl-1">            </span><span class="hl-5">domain:</span><span class="hl-1"> [</span><span class="hl-2">&#39;external&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.approval.request&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">data:</span><span class="hl-1"> { </span><br/><span class="hl-1">              </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">userId</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-5">requiresApproval:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> </span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><br/><span class="hl-1">          </span><span class="hl-3">// Multi-domain event for parallel processing</span><br/><span class="hl-1">          {</span><br/><span class="hl-1">            </span><span class="hl-5">domain:</span><span class="hl-1"> [</span><span class="hl-2">&#39;analytics&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;audit&#39;</span><span class="hl-1">, </span><span class="hl-6">null</span><span class="hl-1">],</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.user.action.logged&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">data:</span><span class="hl-1"> { </span><br/><span class="hl-1">              </span><span class="hl-5">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;user_processing_started&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">userId</span><span class="hl-1"> </span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        ]</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:error-broadcasting" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Error Broadcasting<a href="#md:error-broadcasting" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>System errors are automatically broadcast to all relevant processing contexts:</p>
<ul>
<li>Source event domain (<code>event.domain</code>)</li>
<li>Handler contract domain (<code>handler.contract.domain</code>)</li>
<li>No-domain context (<code>null</code>)</li>
</ul>
<p>Duplicates are automatically removed, so if <code>event.domain === handler.contract.domain</code>, only two error events are created instead of three.</p>
<a id="md:handler-function-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Handler Function Architecture<a href="#md:handler-function-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:handler-signature" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Handler Signature<a href="#md:handler-signature" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each version in your contract maps to a handler function with this signature:</p>
<pre><code class="typescript"><span class="hl-0">async</span><span class="hl-1"> ({ </span><br/><span class="hl-1">  </span><span class="hl-5">span</span><span class="hl-1">,           </span><span class="hl-3">// OpenTelemetry span for tracing</span><br/><span class="hl-1">  </span><span class="hl-5">metadata</span><span class="hl-1">,       </span><span class="hl-3">// Complete workflow metadata (null for new workflows)</span><br/><span class="hl-1">  </span><span class="hl-5">collectedEvents</span><span class="hl-1">,</span><span class="hl-3">// Type-safe map of collected service events</span><br/><span class="hl-1">  </span><span class="hl-5">context</span><span class="hl-1">,        </span><span class="hl-3">// Current workflow state (null for new workflows)</span><br/><span class="hl-1">  </span><span class="hl-5">input</span><span class="hl-1">,          </span><span class="hl-3">// Initialization event data (only for start events)</span><br/><span class="hl-1">  </span><span class="hl-5">service</span><span class="hl-1">,        </span><span class="hl-3">// Service response event data (only for callbacks)</span><br/><span class="hl-1">  </span><span class="hl-5">contracts</span><span class="hl-1">       </span><span class="hl-3">// Available contracts for validation</span><br/><span class="hl-1">}) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">// Handler logic here</span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">    context?</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-5">any</span><span class="hl-1">,    </span><span class="hl-3">// Updated workflow state</span><br/><span class="hl-1">    output?</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-5">any</span><span class="hl-1">,     </span><span class="hl-3">// Completion data (terminates workflow)</span><br/><span class="hl-1">    services?</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-5">any</span><span class="hl-1">[]  </span><span class="hl-3">// Service invocation events</span><br/><span class="hl-1">  };</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:handler-parameters" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Handler Parameters<a href="#md:handler-parameters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong><code>span</code></strong>: OpenTelemetry span for distributed tracing and logging</li>
<li><strong><code>metadata</code></strong>: Complete workflow metadata including status, subject, event tracking</li>
<li><strong><code>collectedEvents</code></strong>: Type-safe access to events collected from previous service calls</li>
<li><strong><code>context</code></strong>: Your workflow's custom state data</li>
<li><strong><code>input</code></strong>: Present only for initialization events (workflow start)</li>
<li><strong><code>service</code></strong>: Present only for service response events (callbacks)</li>
<li><strong><code>contracts</code></strong>: Contract definitions for type validation and event creation</li>
</ul>
<a id="md:return-values" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Return Values<a href="#md:return-values" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong><code>context</code></strong>: Updated workflow state to persist (merged with existing state)</li>
<li><strong><code>output</code></strong>: Completion event data that terminates the workflow</li>
<li><strong><code>services</code></strong>: Array of service invocation events to emit</li>
</ul>
<a id="md:event-collection-and-processing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Event Collection and Processing<a href="#md:event-collection-and-processing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ArvoResumable automatically collects service response events and makes them available through the <code>collectedEvents</code> parameter:</p>
<pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">collectedEvents</span><span class="hl-1">, </span><span class="hl-5">context</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Access collected events by type with full type safety</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">validationEvents</span><span class="hl-1"> = </span><span class="hl-5">collectedEvents</span><span class="hl-1">[</span><span class="hl-2">&#39;evt.validation.success&#39;</span><span class="hl-1">] || [];</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">approvalEvents</span><span class="hl-1"> = </span><span class="hl-5">collectedEvents</span><span class="hl-1">[</span><span class="hl-2">&#39;evt.approval.completed&#39;</span><span class="hl-1">] || [];</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Process collected events</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">allValidationsComplete</span><span class="hl-1"> = </span><span class="hl-5">validationEvents</span><span class="hl-1">.</span><span class="hl-5">length</span><span class="hl-1"> &gt;= </span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">expectedValidations</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">hasApproval</span><span class="hl-1"> = </span><span class="hl-5">approvalEvents</span><span class="hl-1">.</span><span class="hl-0">some</span><span class="hl-1">(</span><span class="hl-5">event</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">event</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">approved</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">allValidationsComplete</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">hasApproval</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">message:</span><span class="hl-1"> </span><span class="hl-2">&#39;All requirements met&#39;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Continue waiting for more events</span><br/><span class="hl-1">    </span><span class="hl-4">return</span><span class="hl-1"> { </span><span class="hl-5">context</span><span class="hl-1"> };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:workflow-lifecycle-management" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Workflow Lifecycle Management<a href="#md:workflow-lifecycle-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:status-management" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Status Management<a href="#md:status-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>ArvoResumable automatically manages workflow status:</p>
<ul>
<li><strong><code>active</code></strong>: Workflow can accept and process events</li>
<li><strong><code>done</code></strong>: Workflow has completed and will ignore additional events</li>
</ul>
<pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">metadata</span><span class="hl-1">, </span><span class="hl-5">input</span><span class="hl-1">, </span><span class="hl-5">service</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Check current status</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">metadata</span><span class="hl-1">?.</span><span class="hl-5">status</span><span class="hl-1"> === </span><span class="hl-2">&#39;done&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">// This won&#39;t happen as the orchestrator filters these out</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Return output to complete workflow (sets status to &#39;done&#39;)</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">shouldComplete</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">output:</span><span class="hl-1"> { </span><span class="hl-5">result:</span><span class="hl-1"> </span><span class="hl-2">&#39;completed&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Continue workflow (keeps status as &#39;active&#39;)</span><br/><span class="hl-1">    </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">context:</span><span class="hl-1"> </span><span class="hl-5">updatedState</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">services:</span><span class="hl-1"> [</span><span class="hl-3">/* more service calls */</span><span class="hl-1">]</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:event-tracking" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Tracking<a href="#md:event-tracking" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The orchestrator automatically tracks:</p>
<ul>
<li><strong>Consumed events</strong>: Last event processed by the workflow</li>
<li><strong>Produced events</strong>: Events emitted in the last execution</li>
<li><strong>Expected events</strong>: Events anticipated from service calls</li>
</ul>
<pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">metadata</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Access event history</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lastConsumed</span><span class="hl-1"> = </span><span class="hl-5">metadata</span><span class="hl-1">?.</span><span class="hl-5">events</span><span class="hl-1">.</span><span class="hl-5">consumed</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">lastProduced</span><span class="hl-1"> = </span><span class="hl-5">metadata</span><span class="hl-1">?.</span><span class="hl-5">events</span><span class="hl-1">.</span><span class="hl-5">produced</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">expectedEvents</span><span class="hl-1"> = </span><span class="hl-5">metadata</span><span class="hl-1">?.</span><span class="hl-5">events</span><span class="hl-1">.</span><span class="hl-5">expected</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Last event: </span><span class="hl-6">${</span><span class="hl-5">lastConsumed</span><span class="hl-10">?.</span><span class="hl-5">type</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Produced </span><span class="hl-6">${</span><span class="hl-5">lastProduced</span><span class="hl-10">?.</span><span class="hl-5">length</span><span class="hl-6">}</span><span class="hl-2"> events last time`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Expecting responses for </span><span class="hl-6">${</span><span class="hl-5">Object</span><span class="hl-10">.</span><span class="hl-0">keys</span><span class="hl-10">(</span><span class="hl-5">expectedEvents</span><span class="hl-10"> </span><span class="hl-1">||</span><span class="hl-10"> {}).</span><span class="hl-5">length</span><span class="hl-6">}</span><span class="hl-2"> events`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:parent-child-orchestration-relationships" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Parent-Child Orchestration Relationships<a href="#md:parent-child-orchestration-relationships" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ArvoResumable supports hierarchical workflow execution through parent-child orchestration patterns.</p>
<a id="md:creating-child-orchestrations" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Creating Child Orchestrations<a href="#md:creating-child-orchestrations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">input</span><span class="hl-1">, </span><span class="hl-5">context</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">input</span><span class="hl-1">?.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">requiresSubWorkflow</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">context:</span><span class="hl-1"> { ...</span><span class="hl-5">context</span><span class="hl-1">, </span><span class="hl-5">waitingForChild:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-5">services:</span><span class="hl-1"> [{</span><br/><span class="hl-1">          </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.child.orchestrator&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">data:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">parentSubject$$:</span><span class="hl-1"> </span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">currentSubject</span><span class="hl-1">, </span><span class="hl-3">// Pass parent context</span><br/><span class="hl-1">            </span><span class="hl-5">childData:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">childRequirements</span><br/><span class="hl-1">          },</span><br/><span class="hl-1">          </span><span class="hl-3">// Child might run in different domain</span><br/><span class="hl-1">          </span><span class="hl-5">domain:</span><span class="hl-1"> [</span><span class="hl-2">&#39;processing.child&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">        }]</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:handling-child-completion" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Handling Child Completion<a href="#md:handling-child-completion" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When child orchestrators complete, their completion events are automatically routed back to the parent's domain context:</p>
<pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">service</span><span class="hl-1">, </span><span class="hl-5">context</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Handle child orchestrator completion</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">service</span><span class="hl-1">?.</span><span class="hl-5">type</span><span class="hl-1"> === </span><span class="hl-2">&#39;evt.child.orchestrator.complete&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">context:</span><span class="hl-1"> { </span><br/><span class="hl-1">          ...</span><span class="hl-5">context</span><span class="hl-1">, </span><br/><span class="hl-1">          </span><span class="hl-5">childResult:</span><span class="hl-1"> </span><span class="hl-5">service</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">waitingForChild:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> </span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-5">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">childResults:</span><span class="hl-1"> </span><span class="hl-5">service</span><span class="hl-1">.</span><span class="hl-5">data</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:domain-context-in-parent-child-relationships" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Domain Context in Parent-Child Relationships<a href="#md:domain-context-in-parent-child-relationships" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Parent orchestrator</strong> operates in one domain (e.g., <code>'internal'</code>)</li>
<li><strong>Child orchestrator</strong> might operate in a different domain (e.g., <code>'external'</code>)</li>
<li>When the child completes, its completion event is routed back to the <strong>parent's domain context</strong></li>
<li>Each orchestrator can operate in its own domain regardless of parent-child relationship</li>
</ul>
<a id="md:advanced-patterns" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Advanced Patterns<a href="#md:advanced-patterns" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:conditional-workflow-branching" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Conditional Workflow Branching<a href="#md:conditional-workflow-branching" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">input</span><span class="hl-1">, </span><span class="hl-5">service</span><span class="hl-1">, </span><span class="hl-5">context</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">input</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">// Branch based on input data</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">priority</span><span class="hl-1"> === </span><span class="hl-2">&#39;high&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">context:</span><span class="hl-1"> { ...</span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">, </span><span class="hl-5">fastTrack:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> },</span><br/><span class="hl-1">          </span><span class="hl-5">services:</span><span class="hl-1"> [{</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.priority.processor&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">data:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><br/><span class="hl-1">          }]</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">      } </span><span class="hl-4">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">context:</span><span class="hl-1"> { ...</span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">, </span><span class="hl-5">fastTrack:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1"> },</span><br/><span class="hl-1">          </span><span class="hl-5">services:</span><span class="hl-1"> [{</span><br/><span class="hl-1">            </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.standard.processor&#39;</span><span class="hl-1">, </span><br/><span class="hl-1">            </span><span class="hl-5">data:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><br/><span class="hl-1">          }]</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:event-aggregation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Aggregation<a href="#md:event-aggregation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">collectedEvents</span><span class="hl-1">, </span><span class="hl-5">context</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">approvals</span><span class="hl-1"> = </span><span class="hl-5">collectedEvents</span><span class="hl-1">[</span><span class="hl-2">&#39;evt.approval.response&#39;</span><span class="hl-1">] || [];</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">validations</span><span class="hl-1"> = </span><span class="hl-5">collectedEvents</span><span class="hl-1">[</span><span class="hl-2">&#39;evt.validation.complete&#39;</span><span class="hl-1">] || [];</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Wait for all required approvals</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">requiredApprovals</span><span class="hl-1"> = </span><span class="hl-5">context</span><span class="hl-1">.</span><span class="hl-5">approvers</span><span class="hl-1">?.</span><span class="hl-5">length</span><span class="hl-1"> || </span><span class="hl-8">0</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">approvedCount</span><span class="hl-1"> = </span><span class="hl-5">approvals</span><span class="hl-1">.</span><span class="hl-0">filter</span><span class="hl-1">(</span><span class="hl-5">a</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">a</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">approved</span><span class="hl-1">).</span><span class="hl-5">length</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">approvedCount</span><span class="hl-1"> &gt;= </span><span class="hl-5">requiredApprovals</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">validations</span><span class="hl-1">.</span><span class="hl-5">length</span><span class="hl-1"> &gt; </span><span class="hl-8">0</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">approved:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">approvers:</span><span class="hl-1"> </span><span class="hl-5">approvals</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-5">a</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-5">a</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">approver</span><span class="hl-1">)</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Still waiting for more approvals</span><br/><span class="hl-1">    </span><span class="hl-4">return</span><span class="hl-1"> { </span><span class="hl-5">context</span><span class="hl-1"> };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:human-in-the-loop-workflows" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Human-in-the-Loop Workflows<a href="#md:human-in-the-loop-workflows" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">input</span><span class="hl-1">, </span><span class="hl-5">service</span><span class="hl-1">, </span><span class="hl-5">context</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">input</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">requiresHumanApproval</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">context:</span><span class="hl-1"> { ...</span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">, </span><span class="hl-5">awaitingApproval:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> },</span><br/><span class="hl-1">        </span><span class="hl-5">services:</span><span class="hl-1"> [{</span><br/><span class="hl-1">          </span><span class="hl-3">// Route to external approval system</span><br/><span class="hl-1">          </span><span class="hl-5">domain:</span><span class="hl-1"> [</span><span class="hl-2">&#39;external.approval&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">          </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.human.approval.request&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">data:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">requestId:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">id</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">description:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">description</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">urgency:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">priority</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        }]</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">service</span><span class="hl-1">?.</span><span class="hl-5">type</span><span class="hl-1"> === </span><span class="hl-2">&#39;evt.human.approval.response&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">service</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">approved</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">context:</span><span class="hl-1"> { ...</span><span class="hl-5">context</span><span class="hl-1">, </span><span class="hl-5">approved:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> },</span><br/><span class="hl-1">          </span><span class="hl-5">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">approvedBy:</span><span class="hl-1"> </span><span class="hl-5">service</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">approver</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">      } </span><span class="hl-4">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-5">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-5">reason:</span><span class="hl-1"> </span><span class="hl-5">service</span><span class="hl-1">.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">reason</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">        };</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:error-handling-philosophy" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Error Handling Philosophy<a href="#md:error-handling-philosophy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ArvoResumable implements a dual-layered error handling strategy:</p>
<a id="md:transaction-errors-vs-system-error-events" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Transaction Errors vs System Error Events<a href="#md:transaction-errors-vs-system-error-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Transaction Errors</strong> (<code>TransactionViolation</code>) represent critical infrastructure failures that prevent the orchestrator from maintaining core guarantees:</p>
<ul>
<li>Lock acquisition failures</li>
<li>State persistence errors</li>
<li>Event subject validation failures</li>
</ul>
<p>These errors immediately halt execution and are thrown upward for infrastructure-level handling.</p>
<p><strong>System Error Events</strong> represent workflow-level failures during normal business operations:</p>
<ul>
<li>Invalid event data</li>
<li>Contract violations</li>
<li>Handler execution failures</li>
</ul>
<p>These become part of the normal event flow, allowing workflows to implement recovery mechanisms.</p>
<a id="md:error-handling-in-practice" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Error Handling in Practice<a href="#md:error-handling-in-practice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">// Transaction errors are thrown and must be caught by infrastructure</span><br/><span class="hl-4">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">orchestrator</span><span class="hl-1">.</span><span class="hl-0">execute</span><span class="hl-1">(</span><span class="hl-5">event</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">// Process successful result</span><br/><span class="hl-1">} </span><span class="hl-4">catch</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">error</span><span class="hl-1"> </span><span class="hl-6">instanceof</span><span class="hl-1"> </span><span class="hl-9">TransactionViolation</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">// Handle infrastructure failure</span><br/><span class="hl-1">    </span><span class="hl-5">logger</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Infrastructure error:&#39;</span><span class="hl-1">, </span><span class="hl-5">error</span><span class="hl-1">.</span><span class="hl-5">cause</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">// Implement retry logic or alert operations</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-3">// Other violations bubble up for system handling</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">// System errors become events that can be handled in workflows</span><br/><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">service</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">if</span><span class="hl-1"> (</span><span class="hl-5">service</span><span class="hl-1">?.</span><span class="hl-5">type</span><span class="hl-1"> === </span><span class="hl-2">&#39;sys.validation.error&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">// Handle service failure gracefully</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">output:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-5">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-5">error:</span><span class="hl-1"> </span><span class="hl-2">&#39;Validation service unavailable&#39;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:resource-locking-and-concurrency" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Resource Locking and Concurrency<a href="#md:resource-locking-and-concurrency" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ArvoResumable provides distributed resource locking to ensure workflow safety:</p>
<a id="md:automatic-locking-strategy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Automatic Locking Strategy<a href="#md:automatic-locking-strategy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Single service</strong>: Locking disabled by default (sequential execution)</li>
<li><strong>Multiple services</strong>: Locking enabled by default (potential concurrency)</li>
<li><strong>Manual override</strong>: Specify <code>requiresResourceLocking</code> explicitly</li>
</ul>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">orchestrator</span><span class="hl-1"> = </span><span class="hl-0">createArvoResumable</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">// ... other config</span><br/><span class="hl-1">  </span><span class="hl-5">requiresResourceLocking:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">, </span><span class="hl-3">// Force locking even for single service</span><br/><span class="hl-1">  </span><span class="hl-5">handler:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-5">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">context</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">// Critical section protected by distributed lock</span><br/><span class="hl-1">      </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">context:</span><span class="hl-1"> { ...</span><span class="hl-5">context</span><span class="hl-1">, </span><span class="hl-5">criticalUpdate:</span><span class="hl-1"> </span><span class="hl-5">Date</span><span class="hl-1">.</span><span class="hl-0">now</span><span class="hl-1">() }</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:lock-acquisition-behavior" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Lock Acquisition Behavior<a href="#md:lock-acquisition-behavior" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Exclusive locks prevent concurrent workflow execution</li>
<li>Lock failures trigger <code>TransactionViolation</code> errors</li>
<li>Locks are automatically released after execution completes</li>
<li>Failed lock acquisition indicates resource contention</li>
</ul>
<a id="md:observability-and-monitoring" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Observability and Monitoring<a href="#md:observability-and-monitoring" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:opentelemetry-integration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">OpenTelemetry Integration<a href="#md:opentelemetry-integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>ArvoResumable provides comprehensive tracing through OpenTelemetry:</p>
<pre><code class="typescript"><span class="hl-12">handler</span><span class="hl-1">: {</span><br/><span class="hl-1">  </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">: </span><span class="hl-6">async</span><span class="hl-1"> ({ </span><span class="hl-5">span</span><span class="hl-1">, </span><span class="hl-5">input</span><span class="hl-1"> }) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">// Add custom span attributes</span><br/><span class="hl-1">    </span><span class="hl-5">span</span><span class="hl-1">.</span><span class="hl-0">setAttribute</span><span class="hl-1">(</span><span class="hl-2">&#39;workflow.user_id&#39;</span><span class="hl-1">, </span><span class="hl-5">input</span><span class="hl-1">?.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">userId</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">span</span><span class="hl-1">.</span><span class="hl-0">setAttribute</span><span class="hl-1">(</span><span class="hl-2">&#39;workflow.priority&#39;</span><span class="hl-1">, </span><span class="hl-5">input</span><span class="hl-1">?.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">priority</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Log workflow progress</span><br/><span class="hl-1">    </span><span class="hl-0">logToSpan</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-5">level:</span><span class="hl-1"> </span><span class="hl-2">&#39;INFO&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">message:</span><span class="hl-1"> </span><span class="hl-2">`Processing user </span><span class="hl-6">${</span><span class="hl-5">input</span><span class="hl-10">?.</span><span class="hl-5">data</span><span class="hl-10">.</span><span class="hl-5">userId</span><span class="hl-6">}</span><span class="hl-2">`</span><br/><span class="hl-1">    }, </span><span class="hl-5">span</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-4">return</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">context:</span><span class="hl-1"> { </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-5">input</span><span class="hl-1">?.</span><span class="hl-5">data</span><span class="hl-1">.</span><span class="hl-5">userId</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-5">services:</span><span class="hl-1"> [{ </span><span class="hl-3">/* service call */</span><span class="hl-1"> }]</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="md:performance-monitoring" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Performance Monitoring<a href="#md:performance-monitoring" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Key metrics automatically tracked:</p>
<ul>
<li>Lock acquisition timing</li>
<li>Handler execution duration</li>
<li>Event processing latency</li>
<li>State persistence performance</li>
<li>Resource utilization patterns</li>
</ul>
<a id="md:testing-arvoresumable-workflows" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Testing ArvoResumable Workflows<a href="#md:testing-arvoresumable-workflows" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:unit-testing-handlers" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Unit Testing Handlers<a href="#md:unit-testing-handlers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">describe</span><span class="hl-1">, </span><span class="hl-5">it</span><span class="hl-1">, </span><span class="hl-5">expect</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;vitest&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">describe</span><span class="hl-1">(</span><span class="hl-2">&#39;UserProcessingHandler&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">it</span><span class="hl-1">(</span><span class="hl-2">&#39;should handle initialization correctly&#39;</span><span class="hl-1">, </span><span class="hl-6">async</span><span class="hl-1"> () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handler</span><span class="hl-1"> = </span><span class="hl-5">userProcessingHandler</span><span class="hl-1">[</span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">];</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">handler</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-5">span:</span><span class="hl-1"> </span><span class="hl-5">mockSpan</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">metadata:</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">collectedEvents:</span><span class="hl-1"> {},</span><br/><span class="hl-1">      </span><span class="hl-5">context:</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">input:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;com.user.processing&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">data:</span><span class="hl-1"> { </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-2">&#39;user123&#39;</span><span class="hl-1">, </span><span class="hl-5">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;create&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-5">service:</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">contracts:</span><span class="hl-1"> </span><span class="hl-5">mockContracts</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">result</span><span class="hl-1">?.</span><span class="hl-5">context</span><span class="hl-1">?.</span><span class="hl-5">userId</span><span class="hl-1">).</span><span class="hl-0">toBe</span><span class="hl-1">(</span><span class="hl-2">&#39;user123&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">result</span><span class="hl-1">?.</span><span class="hl-5">services</span><span class="hl-1">).</span><span class="hl-0">toHaveLength</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">result</span><span class="hl-1">?.</span><span class="hl-5">services</span><span class="hl-1">?.[</span><span class="hl-8">0</span><span class="hl-1">].</span><span class="hl-5">type</span><span class="hl-1">).</span><span class="hl-0">toBe</span><span class="hl-1">(</span><span class="hl-2">&#39;com.validation.check&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-0">it</span><span class="hl-1">(</span><span class="hl-2">&#39;should complete workflow on successful validation&#39;</span><span class="hl-1">, </span><span class="hl-6">async</span><span class="hl-1"> () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">handler</span><span class="hl-1"> = </span><span class="hl-5">userProcessingHandler</span><span class="hl-1">[</span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">];</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">handler</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-5">span:</span><span class="hl-1"> </span><span class="hl-5">mockSpan</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">metadata:</span><span class="hl-1"> </span><span class="hl-5">mockMetadata</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">collectedEvents:</span><span class="hl-1"> {},</span><br/><span class="hl-1">      </span><span class="hl-5">context:</span><span class="hl-1"> { </span><span class="hl-5">userId:</span><span class="hl-1"> </span><span class="hl-2">&#39;user123&#39;</span><span class="hl-1">, </span><span class="hl-5">step:</span><span class="hl-1"> </span><span class="hl-2">&#39;validating&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-5">input:</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-5">service:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-5">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;evt.validation.success&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-5">data:</span><span class="hl-1"> { </span><span class="hl-5">valid:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> }</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-5">contracts:</span><span class="hl-1"> </span><span class="hl-5">mockContracts</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">result</span><span class="hl-1">?.</span><span class="hl-5">output</span><span class="hl-1">?.</span><span class="hl-5">success</span><span class="hl-1">).</span><span class="hl-0">toBe</span><span class="hl-1">(</span><span class="hl-6">true</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:integration-testing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Integration Testing<a href="#md:integration-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">SimpleMachineMemory</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;arvo-xstate&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">describe</span><span class="hl-1">(</span><span class="hl-2">&#39;UserProcessing Integration&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">it</span><span class="hl-1">(</span><span class="hl-2">&#39;should complete full workflow&#39;</span><span class="hl-1">, </span><span class="hl-6">async</span><span class="hl-1"> () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">memory</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">SimpleMachineMemory</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">orchestrator</span><span class="hl-1"> = </span><span class="hl-0">createArvoResumable</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-5">memory</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-3">// ... config</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Send initialization event</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">initResult</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">orchestrator</span><span class="hl-1">.</span><span class="hl-0">execute</span><span class="hl-1">(</span><span class="hl-5">initEvent</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">initResult</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">).</span><span class="hl-0">toHaveLength</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">initResult</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">].</span><span class="hl-5">type</span><span class="hl-1">).</span><span class="hl-0">toBe</span><span class="hl-1">(</span><span class="hl-2">&#39;com.validation.check&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><br/><span class="hl-1">    </span><span class="hl-3">// Send validation response</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">validationResponse</span><span class="hl-1"> = </span><span class="hl-0">createValidationSuccessEvent</span><span class="hl-1">(</span><span class="hl-3">/*...*/</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">finalResult</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">orchestrator</span><span class="hl-1">.</span><span class="hl-0">execute</span><span class="hl-1">(</span><span class="hl-5">validationResponse</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">finalResult</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">).</span><span class="hl-0">toHaveLength</span><span class="hl-1">(</span><span class="hl-8">1</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">finalResult</span><span class="hl-1">.</span><span class="hl-5">events</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">].</span><span class="hl-5">type</span><span class="hl-1">).</span><span class="hl-0">toBe</span><span class="hl-1">(</span><span class="hl-2">&#39;evt.com.user.processing.complete&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="md:best-practices" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Best Practices<a href="#md:best-practices" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:handler-design" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Handler Design<a href="#md:handler-design" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Keep handlers pure</strong>: Avoid side effects beyond returned actions</li>
<li><strong>Use type safety</strong>: Leverage TypeScript for compile-time validation</li>
<li><strong>Handle all cases</strong>: Consider initialization, service responses, and error scenarios</li>
<li><strong>Implement idempotency</strong>: Handlers may be called multiple times with the same input</li>
</ol>
<a id="md:state-management" class="tsd-anchor"></a><h3 class="tsd-anchor-link">State Management<a href="#md:state-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Minimize state size</strong>: Store only essential workflow data</li>
<li><strong>Use immutable updates</strong>: Return new state objects rather than modifying existing ones</li>
<li><strong>Validate state transitions</strong>: Ensure state changes are logical and consistent</li>
<li><strong>Consider serialization</strong>: State must be JSON serializable for persistence</li>
</ol>
<a id="md:error-handling" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Error Handling<a href="#md:error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Distinguish error types</strong>: Use appropriate error handling for different failure modes</li>
<li><strong>Implement graceful degradation</strong>: Handle service failures without breaking workflows</li>
<li><strong>Provide meaningful errors</strong>: Include context and recovery suggestions in error messages</li>
<li><strong>Monitor error patterns</strong>: Track and alert on recurring error conditions</li>
</ol>
<a id="md:performance-optimization" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Performance Optimization<a href="#md:performance-optimization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Optimize handler execution</strong>: Keep business logic efficient and avoid blocking operations</li>
<li><strong>Minimize state size</strong>: Large state objects impact serialization and network performance</li>
<li><strong>Batch service calls</strong>: Group related service invocations when possible</li>
<li><strong>Use appropriate locking</strong>: Enable locking only when necessary for correctness</li>
</ol>
<a id="md:deployment-considerations" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Deployment Considerations<a href="#md:deployment-considerations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="md:memory-requirements" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Memory Requirements<a href="#md:memory-requirements" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>State size impacts memory usage and serialization performance</li>
<li>Consider archiving completed workflows to manage memory consumption</li>
<li>Monitor memory usage patterns under load</li>
</ul>
<a id="md:scaling-strategies" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Scaling Strategies<a href="#md:scaling-strategies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Horizontal scaling through multiple orchestrator instances</li>
<li>Partition workflows by subject or domain for better distribution</li>
<li>Use external state stores for high-volume scenarios</li>
</ul>
<a id="md:monitoring-and-alerts" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Monitoring and Alerts<a href="#md:monitoring-and-alerts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Track workflow completion rates and error patterns</li>
<li>Monitor lock contention and acquisition times</li>
<li>Alert on transaction violations and infrastructure failures</li>
<li>Implement health checks for orchestrator instances</li>
</ul>
<a id="md:migration-from-state-machines" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Migration from State Machines<a href="#md:migration-from-state-machines" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ArvoResumable provides a simpler alternative to state machine orchestration:</p>
<a id="md:key-differences" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Differences<a href="#md:key-differences" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Aspect</th>
<th>State Machines</th>
<th>ArvoResumable</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Programming Model</strong></td>
<td>Declarative state definitions</td>
<td>Imperative handler functions</td>
</tr>
<tr>
<td><strong>Learning Curve</strong></td>
<td>Requires XState knowledge</td>
<td>Uses familiar async/await patterns</td>
</tr>
<tr>
<td><strong>Debugging</strong></td>
<td>State visualization tools</td>
<td>Standard debugging techniques</td>
</tr>
<tr>
<td><strong>Complexity</strong></td>
<td>Good for complex state logic</td>
<td>Better for linear workflows</td>
</tr>
<tr>
<td><strong>Type Safety</strong></td>
<td>Event-driven type inference</td>
<td>Direct TypeScript types</td>
</tr>
</tbody>
</table>
<a id="md:when-to-choose-arvoresumable" class="tsd-anchor"></a><h3 class="tsd-anchor-link">When to Choose ArvoResumable<a href="#md:when-to-choose-arvoresumable" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Linear workflows</strong> with simple request-response patterns</li>
<li><strong>Teams familiar</strong> with imperative programming</li>
<li><strong>Rapid prototyping</strong> requirements</li>
<li><strong>Simple state management</strong> needs</li>
<li><strong>Direct control</strong> over workflow logic preferred</li>
</ul>
<a id="md:when-to-choose-state-machines" class="tsd-anchor"></a><h3 class="tsd-anchor-link">When to Choose State Machines<a href="#md:when-to-choose-state-machines" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Complex state logic</strong> with many conditional branches</li>
<li><strong>Parallel execution</strong> requirements</li>
<li><strong>Visual workflow</strong> modeling important</li>
<li><strong>Declarative approach</strong> preferred</li>
<li><strong>Complex timing</strong> and guard conditions</li>
</ul>
<a id="md:conclusion" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Conclusion<a href="#md:conclusion" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ArvoResumable provides a powerful yet approachable framework for distributed workflow orchestration. By emphasizing explicit control and familiar programming patterns, it enables teams to build reliable event-driven systems without the complexity of state machine abstractions.</p>
<p>The combination of contract-driven development, comprehensive error handling, multi-domain event routing, and built-in observability makes ArvoResumable an excellent choice for teams looking to implement robust workflow orchestration in their event-driven architectures.</p>
<p>Whether you're building simple request-response workflows or complex multi-service orchestrations, ArvoResumable provides the tools and patterns needed to create maintainable, scalable, and reliable distributed systems.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:arvoresumable"><span>Arvo<wbr/>Resumable</span></a><ul><li><a href="#md:overview"><span>Overview</span></a></li><li><ul><li><a href="#md:key-capabilities"><span>Key <wbr/>Capabilities</span></a></li></ul></li><li><a href="#md:getting-started"><span>Getting <wbr/>Started</span></a></li><li><ul><li><a href="#md:basic-setup"><span>Basic <wbr/>Setup</span></a></li></ul></li><li><a href="#md:multi-domain-event-broadcasting"><span>Multi-<wbr/>Domain <wbr/>Event <wbr/>Broadcasting</span></a></li><li><ul><li><a href="#md:understanding-domains"><span>Understanding <wbr/>Domains</span></a></li><li><a href="#md:domain-assignment-rules"><span>Domain <wbr/>Assignment <wbr/>Rules</span></a></li><li><a href="#md:domain-broadcasting-patterns"><span>Domain <wbr/>Broadcasting <wbr/>Patterns</span></a></li><li><a href="#md:error-broadcasting"><span>Error <wbr/>Broadcasting</span></a></li></ul></li><li><a href="#md:handler-function-architecture"><span>Handler <wbr/>Function <wbr/>Architecture</span></a></li><li><ul><li><a href="#md:handler-signature"><span>Handler <wbr/>Signature</span></a></li><li><a href="#md:handler-parameters"><span>Handler <wbr/>Parameters</span></a></li><li><a href="#md:return-values"><span>Return <wbr/>Values</span></a></li></ul></li><li><a href="#md:event-collection-and-processing"><span>Event <wbr/>Collection and <wbr/>Processing</span></a></li><li><a href="#md:workflow-lifecycle-management"><span>Workflow <wbr/>Lifecycle <wbr/>Management</span></a></li><li><ul><li><a href="#md:status-management"><span>Status <wbr/>Management</span></a></li><li><a href="#md:event-tracking"><span>Event <wbr/>Tracking</span></a></li></ul></li><li><a href="#md:parent-child-orchestration-relationships"><span>Parent-<wbr/>Child <wbr/>Orchestration <wbr/>Relationships</span></a></li><li><ul><li><a href="#md:creating-child-orchestrations"><span>Creating <wbr/>Child <wbr/>Orchestrations</span></a></li><li><a href="#md:handling-child-completion"><span>Handling <wbr/>Child <wbr/>Completion</span></a></li><li><a href="#md:domain-context-in-parent-child-relationships"><span>Domain <wbr/>Context in <wbr/>Parent-<wbr/>Child <wbr/>Relationships</span></a></li></ul></li><li><a href="#md:advanced-patterns"><span>Advanced <wbr/>Patterns</span></a></li><li><ul><li><a href="#md:conditional-workflow-branching"><span>Conditional <wbr/>Workflow <wbr/>Branching</span></a></li><li><a href="#md:event-aggregation"><span>Event <wbr/>Aggregation</span></a></li><li><a href="#md:human-in-the-loop-workflows"><span>Human-<wbr/>in-<wbr/>the-<wbr/>Loop <wbr/>Workflows</span></a></li></ul></li><li><a href="#md:error-handling-philosophy"><span>Error <wbr/>Handling <wbr/>Philosophy</span></a></li><li><ul><li><a href="#md:transaction-errors-vs-system-error-events"><span>Transaction <wbr/>Errors vs <wbr/>System <wbr/>Error <wbr/>Events</span></a></li><li><a href="#md:error-handling-in-practice"><span>Error <wbr/>Handling in <wbr/>Practice</span></a></li></ul></li><li><a href="#md:resource-locking-and-concurrency"><span>Resource <wbr/>Locking and <wbr/>Concurrency</span></a></li><li><ul><li><a href="#md:automatic-locking-strategy"><span>Automatic <wbr/>Locking <wbr/>Strategy</span></a></li><li><a href="#md:lock-acquisition-behavior"><span>Lock <wbr/>Acquisition <wbr/>Behavior</span></a></li></ul></li><li><a href="#md:observability-and-monitoring"><span>Observability and <wbr/>Monitoring</span></a></li><li><ul><li><a href="#md:opentelemetry-integration"><span>Open<wbr/>Telemetry <wbr/>Integration</span></a></li><li><a href="#md:performance-monitoring"><span>Performance <wbr/>Monitoring</span></a></li></ul></li><li><a href="#md:testing-arvoresumable-workflows"><span>Testing <wbr/>Arvo<wbr/>Resumable <wbr/>Workflows</span></a></li><li><ul><li><a href="#md:unit-testing-handlers"><span>Unit <wbr/>Testing <wbr/>Handlers</span></a></li><li><a href="#md:integration-testing"><span>Integration <wbr/>Testing</span></a></li></ul></li><li><a href="#md:best-practices"><span>Best <wbr/>Practices</span></a></li><li><ul><li><a href="#md:handler-design"><span>Handler <wbr/>Design</span></a></li><li><a href="#md:state-management"><span>State <wbr/>Management</span></a></li><li><a href="#md:error-handling"><span>Error <wbr/>Handling</span></a></li><li><a href="#md:performance-optimization"><span>Performance <wbr/>Optimization</span></a></li></ul></li><li><a href="#md:deployment-considerations"><span>Deployment <wbr/>Considerations</span></a></li><li><ul><li><a href="#md:memory-requirements"><span>Memory <wbr/>Requirements</span></a></li><li><a href="#md:scaling-strategies"><span>Scaling <wbr/>Strategies</span></a></li><li><a href="#md:monitoring-and-alerts"><span>Monitoring and <wbr/>Alerts</span></a></li></ul></li><li><a href="#md:migration-from-state-machines"><span>Migration from <wbr/>State <wbr/>Machines</span></a></li><li><ul><li><a href="#md:key-differences"><span>Key <wbr/>Differences</span></a></li><li><a href="#md:when-to-choose-arvoresumable"><span>When to <wbr/>Choose <wbr/>Arvo<wbr/>Resumable</span></a></li><li><a href="#md:when-to-choose-state-machines"><span>When to <wbr/>Choose <wbr/>State <wbr/>Machines</span></a></li></ul></li><li><a href="#md:conclusion"><span>Conclusion</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>arvo-event-handler</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with <a href="https://github.com/KillerJulian/typedoc-github-theme" target="_blank">typedoc-github-theme</a></p></footer><div class="overlay"></div></body></html>
